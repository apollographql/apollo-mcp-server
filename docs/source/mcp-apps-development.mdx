---
title: Advanced development with MCP Apps
subtitle: Key concepts when developing MCP Apps
---

This document explains the core concepts of developing an MCP app using React, Apollo Client, and Apollo MCP Server.

If you are using the [Apollo AI Apps Template](https://github.com/apollographql/ai-apps-template) to follow along, much of the following code is provided for you. This guide walks through the critical areas of developing an MCP application for your own understanding.

<Note>

This guide does not provide a comprehensive overview of Apollo Client capabilities. Refer to the [Apollo Client documentation](../react) for more documentation about Apollo Client.

</Note>

## Get started

If you have experience developing with Apollo Client, you already know most of what you need to know to develop with MCP Apps, which uses the `@apollo/client-ai-apps` package to manage GraphQL operations. However, this guide doesn't provide a comprehensive explanation of Apollo Client. To learn about it, go to the [Apollo Client documentation](../react).

### Initialize Apollo Client

Initialize an instance of `ApolloClient` from the `@apollo/client-ai-apps` package. The `ApolloClient` constructor needs at least one instance of an `ApolloCache` and the [manifest file](./mcp-apps-reference#manifest-file).

<Note>

Make sure you import `ApolloClient` from the `@apollo/client-ai-apps` package, not the core `@apollo/client` repository. The `ApolloClient` class from `@apollo/client-ai-apps` is for integrating with the MCP Apps environment.

</Note>

```ts
// src/main.tsx
import { InMemoryCache } from "@apollo/client";
import { ApolloClient, ApplicationManifest } from "@apollo/client-ai-apps";
// Note the manifest location is at the root of our app
import manifest from "../.application-manifest.json";

// You may also provide other options that the core ApolloClient accepts
const client = new ApolloClient({
  cache: new InMemoryCache(),
  manifest: manifest as ApplicationManifest,
});
```

<Note>

Unlike the `ApolloClient` class from the core `@apollo/client` package, the `ApolloClient` class from `@apollo/client-ai-apps` doesn't require a configured `link`. By default, the class uses `ToolCallLink`, which executes GraphQL queries through MCP tools. <br/><br/>

You can provide a custom link chain to grant additional capabilities to `ApolloClient`; however, your terminating link needs to be a `ToolCallLink`.

</Note>

### Provide your client to `ApolloProvider`

Once you have a `client` instance, provide that client to `ApolloProvider`. Like `ApolloClient`, you need to use the `ApolloProvider` component exported from the `@apollo/client-ai-apps` package. This implementation is responsible for initializing the client with MCP Server.

```tsx
import { ApolloProvider } from "@apollo/client-ai-apps/react";

createRoot(document.getElementById("root")!).render(
  <ApolloProvider client={client}>
    <App />
  </ApolloProvider>,
);
```

## Register an operation as an MCP tool

The `@tool` directive defines tools from your GraphQL operations, so you can write queries like you would in an Apollo Client application. Just add the `@tool` directive to the operation.

For example, if you want to define a query that gets the highest-rated products in a marketplace application, define a query called `TopProductsQuery` in your React component, then use the `useQuery` hook from `@apollo/client/react` to read the query data. To register the query as its own tool, use the `@tool` directive.

```tsx
import { gql, TypedDocumentNode } from "@apollo/client";
import { useQuery } from "@apollo/client/react";

// Note: These types should be generated using a tool like GraphQL Codegen.
// Avoid writing them by hand.
const TOP_PRODUCTS_QUERY: TypedDocumentNode<
  TopProductsQuery,
  TopProductsQueryVariables
> = gql`
  query TopProductsQuery
  @tool(
    name: "TopProducts"
    description: "Shows a list of the highest rated products."
  ) {
    topProducts {
      id
      title
      rating
      price
      thumbnail
    }
  }
`;

function TopProducts() {
  const { data, loading, error, dataState } = useQuery(TOP_PRODUCTS_QUERY);

  if (loading) {
    return <div>Loading...</div>;
  }

  if (error) {
    return <div>Error! {error.message}</div>;
  }

  return (
    <div>
      {data.topProducts.map((product) => (
        <Product key={product.id} product={product} />
      ))}
    </div>
  );
}
```

Now that the query is registered as a tool, you can run the app in ChatGPT or an MCP Apps-compatible host and prompt the LLM to show you the top products. They render using data fetched by MCP Server.

## Platform-specific components
